<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GBG Parkour - Minecraft Style</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #87CEEB;
      font-family: Arial, sans-serif;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 24px;
      font-weight: bold;
      color: #fff;
      text-shadow: 2px 2px 5px #000;
      z-index: 100;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background-color: #87CEEB;
      border: 4px solid #fff;
      box-shadow: 0 0 20px #00ffc8;
    }
  </style>
</head>
<body>

<div id="score">Score: 0</div>
<canvas id="gameCanvas" width="800" height="500"></canvas>

<script>
// Canvas setup
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Images
const playerImg = new Image();
playerImg.src = 'https://i.imgur.com/8Km9tLL.png'; // Example Minecraft player
const blockImg = new Image();
blockImg.src = 'https://i.imgur.com/hX0bZyP.png'; // Example block
const coinImg = new Image();
coinImg.src = 'https://i.imgur.com/kVx9JkX.png'; // Coin image

// Game variables
const gravity = 0.8;
let score = 0;
const keys = {};

// Player
const player = {
  x: 50,
  y: 400,
  width: 40,
  height: 60,
  velocityY: 0,
  jumpPower: -15,
  grounded: false
};

// Platform class
class Platform {
  constructor(x, y, width, height, img) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.img = img;
  }
  draw() {
    if (this.img.complete) {
      ctx.drawImage(this.img, this.x, this.y, this.width, this.height);
    } else {
      ctx.fillStyle = '#654321';
      ctx.fillRect(this.x, this.y, this.width, this.height);
    }
  }
}

// Coin class
class Coin {
  constructor(x, y, img) {
    this.x = x;
    this.y = y;
    this.width = 24;
    this.height = 24;
    this.collected = false;
    this.img = img;
  }
  draw() {
    if (!this.collected) {
      if (this.img.complete) {
        ctx.drawImage(this.img, this.x - this.width/2, this.y - this.height/2, this.width, this.height);
      } else {
        ctx.fillStyle = 'yellow';
        ctx.beginPath();
        ctx.arc(this.x, this.y, 10, 0, Math.PI * 2);
        ctx.fill();
      }
    }
  }
}

// Platforms for parkour map
const platforms = [
  new Platform(0, 460, 800, 40, blockImg),
  new Platform(150, 380, 100, 20, blockImg),
  new Platform(300, 320, 100, 20, blockImg),
  new Platform(450, 260, 100, 20, blockImg),
  new Platform(600, 200, 100, 20, blockImg),
  new Platform(750, 140, 50, 20, blockImg)
];

// Coins
const coins = [
  new Coin(200, 350, coinImg),
  new Coin(350, 290, coinImg),
  new Coin(500, 230, coinImg),
  new Coin(650, 170, coinImg),
  new Coin(780, 110, coinImg)
];

// Sounds
const jumpSound = new Audio('https://www.soundjay.com/button/beep-07.wav');
const coinSound = new Audio('https://www.soundjay.com/button/button-3.wav');

// Controls
document.addEventListener('keydown', e => keys[e.code] = true);
document.addEventListener('keyup', e => keys[e.code] = false);

// Game loop
function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Player movement
  if (keys['ArrowRight'] || keys['KeyD']) player.x += 5;
  if (keys['ArrowLeft'] || keys['KeyA']) player.x -= 5;

  // Jump
  if ((keys['ArrowUp'] || keys['Space'] || keys['KeyW']) && player.grounded) {
    player.velocityY = player.jumpPower;
    player.grounded = false;
    jumpSound.play();
  }

  // Gravity
  player.velocityY += gravity;
  player.y += player.velocityY;

  // Ground collision
  player.grounded = false;
  for (let p of platforms) {
    if (player.x < p.x + p.width &&
        player.x + player.width > p.x &&
        player.y + player.height < p.y + 15 &&
        player.y + player.height + player.velocityY > p.y) {
      player.velocityY = 0;
      player.y = p.y - player.height;
      player.grounded = true;
    }
  }

  // Draw platforms
  for (let p of platforms) p.draw();

  // Draw coins
  for (let c of coins) {
    if (!c.collected &&
        player.x + player.width > c.x - c.width/2 &&
        player.x < c.x + c.width/2 &&
        player.y + player.height > c.y - c.height/2 &&
        player.y < c.y + c.height/2) {
      c.collected = true;
      score += 10;
      coinSound.play();
      document.getElementById('score').innerText = 'Score: ' + score;
    }
    c.draw();
  }

  // Draw player
  if (playerImg.complete) {
    ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
  } else {
    ctx.fillStyle = 'red';
    ctx.fillRect(player.x, player.y, player.width, player.height);
  }

  // Reset if fall
  if (player.y > canvas.height) {
    player.x = 50;
    player.y = 400;
    player.velocityY = 0;
  }

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
